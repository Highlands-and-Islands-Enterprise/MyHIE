{"properties":{"connectionReferences":{"shared_flowmanagement_1":{"runtimeSource":"embedded","connection":{"connectionReferenceLogicalName":"leidos_ConnPowerAutomateforAdmins"},"api":{"name":"shared_flowmanagement"}}},"definition":{"$schema":"https://schema.management.azure.com/providers/Microsoft.Logic/schemas/2016-06-01/workflowdefinition.json#","contentVersion":"1.0.0.0","parameters":{"$connections":{"defaultValue":{},"type":"Object"},"$authentication":{"defaultValue":{},"type":"SecureObject"},"FlowEnvironmentName":{"defaultValue":"0a91791e-6a5f-4ee1-9db0-067932ab30da","type":"String","metadata":{"schemaName":"leidos_FlowEnvironmentName"}}},"triggers":{"Recurrence":{"recurrence":{"frequency":"Day","interval":1,"timeZone":"GMT Standard Time","startTime":"2021-01-01T00:00:00Z","schedule":{"hours":["0"],"minutes":[1]}},"type":"Recurrence"}},"actions":{"Apply_to_each":{"foreach":"@body('Filter_array')","actions":{"Condition":{"actions":{"Turn_On_Flow":{"runAfter":{},"type":"OpenApiConnection","inputs":{"host":{"connectionName":"shared_flowmanagement_1","operationId":"StartFlow","apiId":"/providers/Microsoft.PowerApps/apis/shared_flowmanagement"},"parameters":{"environmentName":"@parameters('FlowEnvironmentName')","flowName":"@items('Apply_to_each')?['name']"},"authentication":"@parameters('$authentication')"}}},"runAfter":{},"expression":{"and":[{"not":{"equals":["@items('Apply_to_each')?['properties']?['state']","Started"]}},{"not":{"contains":["@items('Apply_to_each')?['name']","Deprecated"]}}]},"type":"If"}},"runAfter":{"Filter_array":["Succeeded"]},"type":"Foreach"},"List_Flows_as_Admin":{"runAfter":{},"type":"OpenApiConnection","inputs":{"host":{"connectionName":"shared_flowmanagement_1","operationId":"ListFlowsInEnvironment","apiId":"/providers/Microsoft.PowerApps/apis/shared_flowmanagement"},"parameters":{"environmentName":"@parameters('FlowEnvironmentName')"},"authentication":"@parameters('$authentication')"}},"Filter_array":{"runAfter":{"List_Flows_as_Admin":["Succeeded"]},"type":"Query","inputs":{"from":"@outputs('List_Flows_as_Admin')?['body/value']","where":"@not(equals(item()?['properties/state'], 'Started'))"}}},"outputs":{}}},"schemaVersion":"1.0.0.0"}