{"properties":{"connectionReferences":{"shared_flowmanagement_1":{"runtimeSource":"embedded","connection":{"connectionReferenceLogicalName":"leidos_ConnPowerAutomateforAdmins"},"api":{"name":"shared_flowmanagement"}}},"definition":{"$schema":"https://schema.management.azure.com/providers/Microsoft.Logic/schemas/2016-06-01/workflowdefinition.json#","contentVersion":"1.0.0.0","parameters":{"$connections":{"defaultValue":{},"type":"Object"},"$authentication":{"defaultValue":{},"type":"SecureObject"},"FlowEnvironmentName":{"defaultValue":"0a91791e-6a5f-4ee1-9db0-067932ab30da","type":"String","metadata":{"schemaName":"leidos_FlowEnvironmentName"}}},"triggers":{"Recurrence":{"recurrence":{"frequency":"Day","interval":1,"timeZone":"GMT Standard Time","startTime":"2021-01-01T00:00:00Z","schedule":{"hours":["0"],"minutes":[1]}},"metadata":{"operationMetadataId":"c43b13c3-3783-46e2-88b8-f6a231a52cb4"},"type":"Recurrence"}},"actions":{"Apply_to_each":{"foreach":"@body('Filter_array')","actions":{"Condition":{"actions":{"Turn_On_Flow":{"runAfter":{},"metadata":{"operationMetadataId":"a27f71b8-26a0-4e77-b401-dc683274034f"},"type":"OpenApiConnection","inputs":{"host":{"connectionName":"shared_flowmanagement_1","operationId":"StartFlow","apiId":"/providers/Microsoft.PowerApps/apis/shared_flowmanagement"},"parameters":{"environmentName":"@parameters('FlowEnvironmentName')","flowName":"@items('Apply_to_each')?['name']"},"authentication":"@parameters('$authentication')"}}},"runAfter":{},"expression":{"and":[{"not":{"equals":["@items('Apply_to_each')?['properties']?['state']","Started"]}},{"not":{"contains":["@items('Apply_to_each')?['name']","Deprecated"]}}]},"metadata":{"operationMetadataId":"68ebafdf-b671-41c7-ab69-cf79d3ce3709"},"type":"If"}},"runAfter":{"Filter_array":["Succeeded"]},"metadata":{"operationMetadataId":"63e6104e-f3c3-484d-b76d-add0989ca097"},"type":"Foreach"},"List_Flows_as_Admin":{"runAfter":{},"metadata":{"operationMetadataId":"3a818de3-860e-4d42-bf34-135fda5f5501"},"type":"OpenApiConnection","inputs":{"host":{"connectionName":"shared_flowmanagement_1","operationId":"ListFlowsInEnvironment","apiId":"/providers/Microsoft.PowerApps/apis/shared_flowmanagement"},"parameters":{"environmentName":"@parameters('FlowEnvironmentName')"},"authentication":"@parameters('$authentication')"}},"Filter_array":{"runAfter":{"List_Flows_as_Admin":["Succeeded"]},"metadata":{"operationMetadataId":"ad15b29a-7dc9-4238-93cf-cef519076c91"},"type":"Query","inputs":{"from":"@outputs('List_Flows_as_Admin')?['body/value']","where":"@not(equals(item()?['properties/state'], 'Started'))"}}},"outputs":{}}},"schemaVersion":"1.0.0.0"}