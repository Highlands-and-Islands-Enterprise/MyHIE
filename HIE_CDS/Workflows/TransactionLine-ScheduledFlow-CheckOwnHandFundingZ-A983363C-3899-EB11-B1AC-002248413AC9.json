{"properties":{"connectionReferences":{"shared_commondataserviceforapps_1":{"runtimeSource":"embedded","connection":{"connectionReferenceLogicalName":"leidos_ConnClaim"},"api":{"name":"shared_commondataserviceforapps"}}},"definition":{"$schema":"https://schema.management.azure.com/providers/Microsoft.Logic/schemas/2016-06-01/workflowdefinition.json#","contentVersion":"1.0.0.0","parameters":{"$connections":{"defaultValue":{},"type":"Object"},"$authentication":{"defaultValue":{},"type":"SecureObject"}},"triggers":{"Schedule_Every_Day_23:00":{"recurrence":{"frequency":"Day","interval":1,"timeZone":"GMT Standard Time","schedule":{"hours":["23"]}},"type":"Recurrence"}},"actions":{"List_Transaction_Lines":{"runAfter":{},"type":"OpenApiConnection","inputs":{"host":{"connectionName":"shared_commondataserviceforapps_1","operationId":"ListRecords","apiId":"/providers/Microsoft.PowerApps/apis/shared_commondataserviceforapps"},"parameters":{"entityName":"leidos_transactionlines","fetchXml":"<fetch version=\"1.0\" output-format=\"xml-platform\" mapping=\"logical\" distinct=\"false\">\n  <entity name=\"leidos_transactionline\">\n    <attribute name=\"leidos_transactionlineid\" />\n    <attribute name=\"leidos_name\" />\n    <attribute name=\"createdon\" />\n    <order attribute=\"leidos_name\" descending=\"false\" />\n    <filter type=\"and\">\n      <condition attribute=\"leidos_fundingsourcelookup\" operator=\"not-null\" />\n      <condition attribute=\"leidos_budgettype\" operator=\"not-null\" />\n      <condition attribute=\"createdon\" operator=\"last-x-days\" value=\"30\" />\n    </filter>\n    <link-entity name=\"leidos_transaction\" from=\"leidos_transactionid\" to=\"leidos_transaction\" link-type=\"inner\" alias=\"au\">\n      <link-entity name=\"leidos_transactionsubtype\" from=\"leidos_transactionsubtypeid\" to=\"leidos_transactionsubtypenew\" link-type=\"inner\" alias=\"av\">\n        <filter type=\"and\">\n          <condition attribute=\"leidos_isspend\" operator=\"eq\" value=\"1\" />\n        </filter>\n      </link-entity>\n      <link-entity name=\"leidos_project\" from=\"leidos_projectid\" to=\"leidos_project\" link-type=\"inner\" alias=\"aw\">\n        <link-entity name=\"account\" from=\"accountid\" to=\"leidos_parentaccount\" link-type=\"inner\" alias=\"ax\">\n          <filter type=\"and\">\n            <condition attribute=\"leidos_hieownhandaccount\" operator=\"eq\" value=\"1\" />\n          </filter>\n        </link-entity>\n      </link-entity>\n    </link-entity>\n  </entity>\n</fetch>"},"authentication":"@parameters('$authentication')"}},"Compose":{"runAfter":{"List_Transaction_Lines":["Succeeded"]},"type":"Compose","inputs":"@length(outputs('List_Transaction_Lines')?['body/value'])"},"Condition":{"actions":{"Apply_to_each":{"foreach":"@outputs('List_Transaction_Lines')?['body/value']","actions":{"Perform_a_bound_action_Process_Genie_ZpE":{"runAfter":{},"type":"OpenApiConnection","inputs":{"host":{"connectionName":"shared_commondataserviceforapps_1","operationId":"PerformBoundAction","apiId":"/providers/Microsoft.PowerApps/apis/shared_commondataserviceforapps"},"parameters":{"entityName":"leidos_transactionlines","actionName":"Microsoft.Dynamics.CRM.leidos_TransactionLineActionCallFundingCheckN52ZpE","recordId":"@items('Apply_to_each')?['leidos_transactionlineid']"},"authentication":"@parameters('$authentication')"}}},"runAfter":{},"type":"Foreach"}},"runAfter":{"Compose":["Succeeded"]},"expression":{"greaterOrEquals":["@outputs('Compose')",1]},"type":"If"}},"outputs":{}}},"schemaVersion":"1.0.0.0"}